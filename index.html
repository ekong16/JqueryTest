<html>
<head>
    <meta charset="utf-8">
    <title>Test</title>
    <link rel="stylesheet" href="styles.css"/>
</head>
   
<body>
    <script src="jquery.js"></script>
    <h1>Test for jQuery</h1>
    <script type="text/javascript">
        var CANVAS_WIDTH = window.innerWidth*0.9;
        var CANVAS_HEIGHT = window.innerHeight*0.8;
        var cWidth = CANVAS_WIDTH;
        var cHeight = CANVAS_HEIGHT;
       

        var canvasElement = $("<canvas width='" + CANVAS_WIDTH + 
                              "' height='" + CANVAS_HEIGHT + "'></canvas>");
        
        var canvas = canvasElement.get(0).getContext("2d");
        canvasElement.appendTo('body');
        var textX = 100;
        var textY = 100;
        var FPS = 60;
        
        window.addEventListener('resize', resizeCanvas, false);
        window.addEventListener('orientationchange', resizeCanvas, false);
    
        
        function resizeCanvas(){
            canvas.canvas.width = window.innerWidth*0.9;
            canvas.canvas.height = window.innerHeight*0.8;
        }
        
        function Sprite(x,y,w,h,img_src) {
            this.x = x;
            this.y = y;
            this.w = w;
            this.h = h;
            this.img = new Image(); 
            this.img.src = img_src;
            this.draw = function(){
                canvas.drawImage(this.img, this.x,this.y,this.w,this.h);
            }; 
        }
            
    
        
        function Character(x,y,w,h,img_src) {
            var t = 0;
            var keyPressed = false; 
            Sprite.call(this,x,y,w,h,img_src);
            this.move = function(){
                var right = false;
                var up = false;
                var left = false;
                var down = false;
                $(document).keydown(function(e){
                    //alert("hi");
                    keyPressed = true;
                    switch(e.which) {
                            case 37: left = true; 
                            break;

                            case 38: up = true;
                            break;

                            case 39: right = true;
                            break;

                            case 40: down = true;
                            break;
                            
                            default: return;

                            }
                        e.preventDefault();
                    });
                
              
                
                if (!keyPressed){ 
                    if (this.y + this.h >= canvas.canvas.height){
                        this.y = canvas.canvas.height - this.h;
                    }
                    else {
                        this.y += t; 
                        t+=1;
                    } 
                }
            };
        }
        
         
        
        Character.prototype = Object.create(Sprite.prototype);
        
        var myChar = new Character(10,10,50,50,"http://www.wpclipart.com/smiley/assorted_smiley/assorted_2/fuzzball_smiley.svg");
        
        
        setInterval(function() {
            update();
            draw();
        }, 1000/FPS);
        
        function update(){
            textX += 1;
            textY += 1;
            myChar.move();
        }
       
        
        function draw(){
            canvas.clearRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);
            canvas.fillStyle = "#000"; // Set color to black
            canvas.font = "30px Arial";
            canvas.fillText("Sup!", textX, textY);
            myChar.draw();
        }
        
    </script>
    
</body>
    
</html>